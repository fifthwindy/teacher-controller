import{_ as L,d as k,g as c,E as m,a as C,c as v,e as E,b as T,f as S,h as D,i as p,j as o,w as d,F as I,k as N,l as B,m as M,n as z,o as f,p as w,q as r,r as U,s as $,t as O,u as P,v as A}from"./index-f6951b29.js";/* empty css                        */const F=k({data(){return{openMap:!1,schools:[],pageinfo:{currentPage:1,pageSize:5,totalpage:10},school:{address:"",area:"",city:"",createTime:"",deleted:0,description:"",enable:0,id:0,latitude:"",longitude:"",province:"",schoolName:"",updateTime:""},addressInfo:{longitude:"",latitude:"",province:"",city:"",district:"",address:""},DialogVisible:!1,EditDialogVisible:!1,admin:!1,searchKey:""}},mounted(){this.getall(),JSON.parse(localStorage.getItem("admin"))?this.admin=JSON.parse(localStorage.getItem("admin")):this.admin=!1},methods:{search(){c(this.searchKey).then(e=>{e.success&&(m("查找成功"),this.school=e.data.school,this.DialogVisible=!0)}).catch(e=>{m(e.msg)})},getroot(){},baidumap(){let e=this;var l=new BMap.Map("bdmap",{coordsType:5}),s=new BMap.Point(e.addressInfo.longitude,e.addressInfo.latitude);l.centerAndZoom(s,15),l.enableScrollWheelZoom(!0);var b=new BMap.Marker(s);l.addOverlay(b)},openmap(e){this.addressInfo.longitude=e.longitude,this.addressInfo.latitude=e.latitude,this.addressInfo.address=e.address,this.openMap=!0},stores(){let e=JSON.parse(localStorage.getItem("userinfo"));console.log(e.token)},tested(){console.log("2#A211".slice(3,6)),console.log(parseInt("2")+1)},getid(e){return e.split("")[2]=="A"?1e3+parseInt(e.slice(3,6)):2e3+parseInt(e.slice(3,6))},dsort(e){for(var l=0;l<e.length;l++)e[l].id=l+1;return e},pageChange(e){this.pageinfo.currentPage=e,this.getall()},getall(){let e=this.pageinfo.pageSize*(this.pageinfo.currentPage-1),l=this.pageinfo.currentPage*this.pageinfo.pageSize;C().then(s=>{if(s.success)this.schools=s.data.schools.slice(e,l),this.pageinfo.totalpage=s.data.schools.length;else return!1}).catch(s=>{console.log(s)})},add(){this.DialogVisible=!0},confirmAdd(){const e=this.school;addSchool(e).then(l=>{this.getall()}).catch(l=>{console.log(l)}),this.DialogVisible=!1},edit(e){this.EditDialogVisible=!0,this.school=v(e)},confirmEdit(){let e=this.school;E(e).then(l=>{if(l.success)this.EditDialogVisible=!1,this.getall(),m(l.msg);else return m(l.msg),!1}).catch(l=>{m("网络错误联系管理员")})},del(e){console.log(e);const l={id:e};T.confirm("是否确认删除","Warning",{confirmButtonText:"确认删除",cancelButtonText:"在考虑一下",type:"warning"}).then(()=>{m({type:"success",message:"删除成功"}),S(l).then(s=>{if(s.success)this.getall();else return console.log(s.msg),!1}).catch(s=>{console.log(s)})}).catch(()=>{m({type:"info",message:"在考虑一下"})})},delall(){for(let e=1;e<=this.pageinfo.totalpage;e++){let l={id:e};deleteDormitory(l).then(s=>{if(s.success)this.getdormitorys();else return console.log(s.msg),!1}).catch(s=>{console.log(s)})}}}}),K={class:"head"},J={class:"dialog-footer"},Z={class:"dialog-footer"},j=p("div",{id:"bdmap",style:{width:"100%",height:"400px"}},null,-1);function q(e,l,s,b,G,H){const u=$,t=N,n=O,y=B,W=M,i=P,V=A,h=z;return f(),D(I,null,[p("div",K,[o(t,{placeholder:"输入学校编号以便搜索",modelValue:e.searchKey,"onUpdate:modelValue":l[0]||(l[0]=a=>e.searchKey=a)},{append:d(()=>[o(u,{icon:"Search",onClick:e.search},null,8,["onClick"])]),_:1},8,["modelValue"]),o(y,{data:e.schools,style:{width:"100%"}},{default:d(()=>[o(n,{fixed:"",prop:"id",label:"学校编号",width:"150"}),o(n,{prop:"province",label:"省份",width:"120"}),o(n,{prop:"city",label:"市区",width:"120"}),o(n,{prop:"area",label:"县区",width:"120"}),o(n,{prop:"schoolName",label:"学校名",width:"120"}),o(n,{prop:"latitude",label:"纬度",width:"120"}),o(n,{prop:"longitude",label:"经度",width:"120"}),o(n,{prop:"enable",label:"是否启用",width:"120"}),o(n,{prop:"description",label:"学校描述",width:"120"}),o(n,{prop:"address",label:"学校地址",width:"120"}),o(n,{prop:"createTime",label:"创建时间",width:"120"}),o(n,{prop:"updateTime",label:"更新时间",width:"120"}),o(n,{prop:"deleted",label:"是否弃用",width:"120"}),o(n,{fixed:"right",label:"Operations",width:"180"},{default:d(a=>[e.admin?(f(),w(u,{key:0,link:"",type:"primary",size:"small",onClick:g=>e.edit(a.row)},{default:d(()=>[r("修改")]),_:2},1032,["onClick"])):U("",!0),e.admin?(f(),w(u,{key:1,link:"",type:"primary",size:"small",onClick:g=>e.del(a.row.id)},{default:d(()=>[r("删除")]),_:2},1032,["onClick"])):U("",!0),o(u,{link:"",type:"primary",size:"small",onClick:g=>e.openmap(a.row)},{default:d(()=>[r("显示在百度地图上")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),o(W,{layout:"prev, pager, next",total:e.pageinfo.totalpage,"page-size":e.pageinfo.pageSize,onCurrentChange:e.pageChange},null,8,["total","page-size","onCurrentChange"])]),o(h,{modelValue:e.DialogVisible,"onUpdate:modelValue":l[15]||(l[15]=a=>e.DialogVisible=a),title:"查询学校结果",width:"50%",center:""},{footer:d(()=>[p("span",J,[o(u,{onClick:l[14]||(l[14]=a=>e.DialogVisible=!1)},{default:d(()=>[r("关闭")]),_:1})])]),default:d(()=>[o(V,{model:e.school},{default:d(()=>[o(i,{label:"学校编号","label-width":e.formLabelWidth},{default:d(()=>[o(t,{modelValue:e.school.id,"onUpdate:modelValue":l[1]||(l[1]=a=>e.school.id=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(i,{label:"省份","label-width":e.formLabelWidth},{default:d(()=>[o(t,{modelValue:e.school.province,"onUpdate:modelValue":l[2]||(l[2]=a=>e.school.province=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(i,{label:"市区","label-width":e.formLabelWidth},{default:d(()=>[o(t,{modelValue:e.school.city,"onUpdate:modelValue":l[3]||(l[3]=a=>e.school.city=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(i,{label:"县区","label-width":e.formLabelWidth},{default:d(()=>[o(t,{modelValue:e.school.area,"onUpdate:modelValue":l[4]||(l[4]=a=>e.school.area=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(i,{label:"学校名","label-width":e.formLabelWidth},{default:d(()=>[o(t,{modelValue:e.school.schoolName,"onUpdate:modelValue":l[5]||(l[5]=a=>e.school.schoolName=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(i,{label:"纬度","label-width":e.formLabelWidth},{default:d(()=>[o(t,{modelValue:e.school.latitude,"onUpdate:modelValue":l[6]||(l[6]=a=>e.school.latitude=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(i,{label:"经度","label-width":e.formLabelWidth},{default:d(()=>[o(t,{modelValue:e.school.longitude,"onUpdate:modelValue":l[7]||(l[7]=a=>e.school.longitude=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(i,{label:"是否启用","label-width":e.formLabelWidth},{default:d(()=>[o(t,{modelValue:e.school.enable,"onUpdate:modelValue":l[8]||(l[8]=a=>e.school.enable=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(i,{label:"学校描述","label-width":e.formLabelWidth},{default:d(()=>[o(t,{modelValue:e.school.description,"onUpdate:modelValue":l[9]||(l[9]=a=>e.school.description=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(i,{label:"学校地址","label-width":e.formLabelWidth},{default:d(()=>[o(t,{modelValue:e.school.address,"onUpdate:modelValue":l[10]||(l[10]=a=>e.school.address=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(i,{label:"创建时间","label-width":e.formLabelWidth},{default:d(()=>[o(t,{modelValue:e.school.createTime,"onUpdate:modelValue":l[11]||(l[11]=a=>e.school.createTime=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(i,{label:"更新时间","label-width":e.formLabelWidth},{default:d(()=>[o(t,{modelValue:e.school.updateTime,"onUpdate:modelValue":l[12]||(l[12]=a=>e.school.updateTime=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(i,{label:"是否弃用","label-width":e.formLabelWidth},{default:d(()=>[o(t,{modelValue:e.school.deleted,"onUpdate:modelValue":l[13]||(l[13]=a=>e.school.deleted=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"]),o(h,{modelValue:e.EditDialogVisible,"onUpdate:modelValue":l[29]||(l[29]=a=>e.EditDialogVisible=a),title:"修改学校信息",width:"50%",center:""},{footer:d(()=>[p("span",Z,[o(u,{onClick:l[28]||(l[28]=a=>e.EditDialogVisible=!1)},{default:d(()=>[r("取消")]),_:1}),o(u,{type:"primary",onClick:e.confirmEdit},{default:d(()=>[r(" 确认 ")]),_:1},8,["onClick"])])]),default:d(()=>[o(V,{model:e.school},{default:d(()=>[o(i,{label:"省份","label-width":e.formLabelWidth},{default:d(()=>[o(t,{modelValue:e.school.province,"onUpdate:modelValue":l[16]||(l[16]=a=>e.school.province=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(i,{label:"市区","label-width":e.formLabelWidth},{default:d(()=>[o(t,{modelValue:e.school.city,"onUpdate:modelValue":l[17]||(l[17]=a=>e.school.city=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(i,{label:"县区","label-width":e.formLabelWidth},{default:d(()=>[o(t,{modelValue:e.school.area,"onUpdate:modelValue":l[18]||(l[18]=a=>e.school.area=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(i,{label:"学校名","label-width":e.formLabelWidth},{default:d(()=>[o(t,{modelValue:e.school.schoolName,"onUpdate:modelValue":l[19]||(l[19]=a=>e.school.schoolName=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(i,{label:"纬度","label-width":e.formLabelWidth},{default:d(()=>[o(t,{modelValue:e.school.latitude,"onUpdate:modelValue":l[20]||(l[20]=a=>e.school.latitude=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(i,{label:"经度","label-width":e.formLabelWidth},{default:d(()=>[o(t,{modelValue:e.school.longitude,"onUpdate:modelValue":l[21]||(l[21]=a=>e.school.longitude=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(i,{label:"是否启用","label-width":e.formLabelWidth},{default:d(()=>[o(t,{modelValue:e.school.enable,"onUpdate:modelValue":l[22]||(l[22]=a=>e.school.enable=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(i,{label:"学校描述","label-width":e.formLabelWidth},{default:d(()=>[o(t,{modelValue:e.school.description,"onUpdate:modelValue":l[23]||(l[23]=a=>e.school.description=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(i,{label:"学校地址","label-width":e.formLabelWidth},{default:d(()=>[o(t,{modelValue:e.school.address,"onUpdate:modelValue":l[24]||(l[24]=a=>e.school.address=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(i,{label:"创建时间","label-width":e.formLabelWidth},{default:d(()=>[o(t,{modelValue:e.school.createTime,"onUpdate:modelValue":l[25]||(l[25]=a=>e.school.createTime=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(i,{label:"更新时间","label-width":e.formLabelWidth},{default:d(()=>[o(t,{modelValue:e.school.updateTime,"onUpdate:modelValue":l[26]||(l[26]=a=>e.school.updateTime=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(i,{label:"是否弃用","label-width":e.formLabelWidth},{default:d(()=>[o(t,{modelValue:e.school.deleted,"onUpdate:modelValue":l[27]||(l[27]=a=>e.school.deleted=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"]),o(h,{title:"位置显示",modelValue:e.openMap,"onUpdate:modelValue":l[31]||(l[31]=a=>e.openMap=a),width:"600px",onOpen:e.baidumap},{default:d(()=>[o(t,{modelValue:e.addressInfo.address,"onUpdate:modelValue":l[30]||(l[30]=a=>e.addressInfo.address=a),disabled:""},{prepend:d(()=>[r("当前位置：")]),_:1},8,["modelValue"]),j]),_:1},8,["modelValue","onOpen"])],64)}const X=L(F,[["render",q]]);export{X as default};
