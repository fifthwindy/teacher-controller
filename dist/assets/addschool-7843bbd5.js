import{_ as g,d as _,I as M,E as V,h as w,j as e,w as a,F as k,J as I,v as C,n as U,o as E,q as c,i as v,k as A,u as B,K as S,s as Y}from"./index-f6951b29.js";/* empty css               */import{h as b}from"./moment-fbc5633a.js";const N=_({data(){return{searchAddresKeywords:"",openMap:!1,school:{address:"",area:"",city:"",createTime:"",deleted:0,description:"",enable:0,id:0,latitude:"",longitude:"",province:"",schoolName:"",updateTime:""},addressInfo:{longitude:"",latitude:"",province:"",city:"",district:"",address:""},rules:{}}},mounted(){},methods:{openmap(){this.openMap=!0},baidumap(){let o=this;var l=new BMap.Map("bdmap",{coordsType:5}),m=new BMap.Point(116.404,39.915);l.centerAndZoom(m,15),l.enableScrollWheelZoom(!0),l.addEventListener("click",function(i){var r=i.point;l.clearOverlays();var s=new BMap.Marker(r);l.addOverlay(s),o.geocAddress(r)});var p=new BMap.Autocomplete({input:"searchAddres",location:l});p.addEventListener("onconfirm",function(i){l.clearOverlays();var r=new BMap.LocalSearch(l,{onSearchComplete:function(n){var u=n.getPoi(0).point;l.centerAndZoom(u,15),l.addOverlay(new BMap.Marker(u)),o.geocAddress(u)}}),s=i.item.value;r.search(s.province+s.city+s.district+s.street+s.business)})},geocAddress(o){let l=this;var m=new BMap.Geocoder({extensions_town:!0});m.getLocation(o,function(p){var i=p.addressComponents;l.addressInfo.longitude=o.lng,l.addressInfo.latitude=o.lat,l.addressInfo.province=i.province,l.addressInfo.city=i.city,l.addressInfo.district=i.district;let r=i.street+i.streetNumber;p.surroundingPois.length>0&&(r=r+p.surroundingPois[0].title),l.addressInfo.address=r})},getdata(){this.createTime=b().format("YYYY-MM-DD HH:mm:ss"),this.updateTime=b().format("YYYY-MM-DD HH:mm:ss")},add(){const o=this.school;this.getdata(),M(o).then(l=>{V("添加成功")}).catch(l=>{V("添加失败"),console.log(l)})},confirmSelect(){this.school.province=this.addressInfo.province,this.school.city=this.addressInfo.city,this.school.area=this.addressInfo.district,this.school.address=this.addressInfo.address,this.school.latitude=this.addressInfo.latitude,this.school.longitude=this.addressInfo.longitude,this.openMap=!1},cancelSelect(){this.openMap=!1}}}),O=v("div",{id:"bdmap",style:{width:"100%",height:"400px"}},null,-1);function T(o,l,m,p,i,r){const s=A,n=B,t=S,u=I,h=C,f=Y,y=U;return E(),w(k,null,[e(h,{"label-width":"100px",model:o.school,style:{"max-width":"800px"},rules:o.rules},{default:a(()=>[e(u,null,{default:a(()=>[e(t,{span:24},{default:a(()=>[e(n,{label:"学校编号"},{default:a(()=>[e(s,{modelValue:o.school.id,"onUpdate:modelValue":l[0]||(l[0]=d=>o.school.id=d)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(t,{span:12},{default:a(()=>[e(n,{label:"学校名称"},{default:a(()=>[e(s,{modelValue:o.school.schoolName,"onUpdate:modelValue":l[1]||(l[1]=d=>o.school.schoolName=d)},null,8,["modelValue"])]),_:1})]),_:1}),e(t,{span:12},{default:a(()=>[e(n,{label:"学校描述"},{default:a(()=>[e(s,{modelValue:o.school.description,"onUpdate:modelValue":l[2]||(l[2]=d=>o.school.description=d)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(t,{span:8},{default:a(()=>[e(n,{label:"省份"},{default:a(()=>[e(s,{modelValue:o.school.province,"onUpdate:modelValue":l[3]||(l[3]=d=>o.school.province=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(t,{span:8},{default:a(()=>[e(n,{label:"市区"},{default:a(()=>[e(s,{modelValue:o.school.city,"onUpdate:modelValue":l[4]||(l[4]=d=>o.school.city=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(t,{span:8},{default:a(()=>[e(n,{label:"县区"},{default:a(()=>[e(s,{modelValue:o.school.area,"onUpdate:modelValue":l[5]||(l[5]=d=>o.school.area=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(t,{span:24},{default:a(()=>[e(n,{label:"学校地址"},{default:a(()=>[e(s,{modelValue:o.school.address,"onUpdate:modelValue":l[6]||(l[6]=d=>o.school.address=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(t,{span:12},{default:a(()=>[e(n,{label:"纬度"},{default:a(()=>[e(s,{modelValue:o.school.latitude,"onUpdate:modelValue":l[7]||(l[7]=d=>o.school.latitude=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(t,{span:12},{default:a(()=>[e(n,{label:"经度"},{default:a(()=>[e(s,{modelValue:o.school.longitude,"onUpdate:modelValue":l[8]||(l[8]=d=>o.school.longitude=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(t,{span:12},{default:a(()=>[e(n,{label:"是否启用"},{default:a(()=>[e(s,{modelValue:o.school.enable,"onUpdate:modelValue":l[9]||(l[9]=d=>o.school.enable=d)},null,8,["modelValue"])]),_:1})]),_:1}),e(t,{span:12},{default:a(()=>[e(n,{label:"是否弃用"},{default:a(()=>[e(s,{modelValue:o.school.deleted,"onUpdate:modelValue":l[10]||(l[10]=d=>o.school.deleted=d)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"]),e(u,{justify:"center"},{default:a(()=>[e(t,{span:4},{default:a(()=>[e(f,{link:"",type:"primary",onClick:o.add},{default:a(()=>[c("确认添加")]),_:1},8,["onClick"])]),_:1}),e(t,{span:4},{default:a(()=>[e(f,{link:"",type:"primary",onClick:o.openmap},{default:a(()=>[c("添加地址信息")]),_:1},8,["onClick"])]),_:1})]),_:1}),e(y,{title:"位置选择",modelValue:o.openMap,"onUpdate:modelValue":l[12]||(l[12]=d=>o.openMap=d),width:"800px",onOpen:o.baidumap},{default:a(()=>[e(h,{"label-width":"80px"},{default:a(()=>[e(u,null,{default:a(()=>[e(t,{span:10,class:"search"},{default:a(()=>[e(n,{label:"搜索地址"},{default:a(()=>[e(s,{type:"text",id:"searchAddres",modelValue:o.searchAddresKeywords,"onUpdate:modelValue":l[11]||(l[11]=d=>o.searchAddresKeywords=d),placeholder:"请输入地点"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),O,v("div",null,[e(f,{type:"primary",onClick:o.confirmSelect},{default:a(()=>[c("确 定")]),_:1},8,["onClick"]),e(f,{onClick:o.cancelSelect},{default:a(()=>[c("取 消")]),_:1},8,["onClick"])])]),_:1},8,["modelValue","onOpen"])],64)}const K=g(N,[["render",T]]);export{K as default};
