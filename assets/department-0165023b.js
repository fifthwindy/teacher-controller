import{_ as D,d as T,x as k,E as r,y as E,c as U,z as W,b as L,A as N,h as I,i as u,j as a,w as d,F as z,k as S,l as v,m as B,n as $,o as f,p as g,q as s,r as V,s as P,t as F,u as K,v as O}from"./index-f6951b29.js";/* empty css                        */const A=T({data(){return{departments:[],pageinfo:{currentPage:1,pageSize:5,totalpage:10},department:{createTime:"",deleted:0,departCode:"",departDesc:"",departName:"",departType:"",id:0,schoolId:0,updateTime:""},DialogVisible:!1,EditDialogVisible:!1,admin:!1,searchKey:""}},mounted(){this.getall(),JSON.parse(localStorage.getItem("admin"))?this.admin=JSON.parse(localStorage.getItem("admin")):this.admin=!1},methods:{search(){k(this.searchKey).then(e=>{e.success&&(r("查找成功"),this.department=e.data.department,this.DialogVisible=!0)}).catch(e=>{r(e.msg)})},tested(){console.log("2#A211".slice(3,6)),console.log(parseInt("2")+1)},dsort(e){for(var l=0;l<e.length;l++)e[l].id=l+1;return e},pageChange(e){this.pageinfo.currentPage=e,this.getall()},getall(){let e=this.pageinfo.pageSize*(this.pageinfo.currentPage-1),l=this.pageinfo.currentPage*this.pageinfo.pageSize;E().then(n=>{if(n.success)this.departments=n.data.departments.slice(e,l),this.pageinfo.totalpage=n.data.departments.length;else return!1}).catch(n=>{console.log(n)})},edit(e){this.EditDialogVisible=!0,this.department=U(e)},confirmEdit(){let e=this.department;W(e).then(l=>{if(l.success)this.EditDialogVisible=!1,this.getall(),r(l.msg);else return r(l.msg),!1}).catch(l=>{r("网络错误联系管理员")})},del(e){console.log(e);const l={id:e};L.confirm("是否确认删除","Warning",{confirmButtonText:"确认删除",cancelButtonText:"在考虑一下",type:"warning"}).then(()=>{r({type:"success",message:"删除成功"}),N(l).then(n=>{if(n.success)this.getall();else return console.log(n.msg),!1}).catch(n=>{console.log(n)})}).catch(()=>{r({type:"info",message:"在考虑一下"})})}}}),J={class:"head"},M={class:"dialog-footer"},j={class:"dialog-footer"};function q(e,l,n,G,H,Q){const p=P,o=S,m=F,w=v,C=B,i=K,b=O,h=$;return f(),I(z,null,[u("div",J,[a(o,{placeholder:"输入部门名以便搜索",modelValue:e.searchKey,"onUpdate:modelValue":l[0]||(l[0]=t=>e.searchKey=t)},{append:d(()=>[a(p,{icon:"Search",onClick:e.search},null,8,["onClick"])]),_:1},8,["modelValue"]),a(w,{data:e.departments,style:{width:"100%"}},{default:d(()=>[a(m,{fixed:"",prop:"id",label:"部门编号",width:"150"}),a(m,{prop:"departName",label:"部门名",width:"120"}),a(m,{prop:"departCode",label:"部门英文名",width:"120"}),a(m,{prop:"departDesc",label:"部门描述",width:"120"}),a(m,{prop:"departType",label:"部门类别",width:"120"}),a(m,{prop:"schoolId",label:"学校id",width:"120"}),a(m,{prop:"createTime",label:"创建时间",width:"120"}),a(m,{prop:"updateTime",label:"更新时间",width:"120"}),a(m,{prop:"deleted",label:"是否弃用",width:"120"}),a(m,{fixed:"right",label:"Operations",width:"120"},{default:d(t=>[e.admin?(f(),g(p,{key:0,link:"",type:"primary",size:"small",onClick:y=>e.edit(t.row)},{default:d(()=>[s("修改")]),_:2},1032,["onClick"])):V("",!0),e.admin?(f(),g(p,{key:1,link:"",type:"primary",size:"small",onClick:y=>e.del(t.row.id)},{default:d(()=>[s("删除")]),_:2},1032,["onClick"])):V("",!0),a(p,{link:"",type:"primary",size:"small"},{default:d(()=>[s("申请管理")]),_:1})]),_:1})]),_:1},8,["data"]),a(C,{layout:"prev, pager, next",total:e.pageinfo.totalpage,"page-size":e.pageinfo.pageSize,onCurrentChange:e.pageChange},null,8,["total","page-size","onCurrentChange"])]),a(h,{modelValue:e.DialogVisible,"onUpdate:modelValue":l[11]||(l[11]=t=>e.DialogVisible=t),title:"查询的部门信息",width:"50%",center:""},{footer:d(()=>[u("span",M,[a(p,{onClick:l[10]||(l[10]=t=>e.DialogVisible=!1)},{default:d(()=>[s("关闭")]),_:1})])]),default:d(()=>[a(b,{model:e.department},{default:d(()=>[a(i,{label:"部门编号","label-width":e.formLabelWidth},{default:d(()=>[a(o,{modelValue:e.department.id,"onUpdate:modelValue":l[1]||(l[1]=t=>e.department.id=t),autocomplete:"off",disabled:""},null,8,["modelValue"])]),_:1},8,["label-width"]),a(i,{label:"部门名","label-width":e.formLabelWidth},{default:d(()=>[a(o,{modelValue:e.department.departName,"onUpdate:modelValue":l[2]||(l[2]=t=>e.department.departName=t),autocomplete:"off",disabled:""},null,8,["modelValue"])]),_:1},8,["label-width"]),a(i,{label:"部门英文名","label-width":e.formLabelWidth},{default:d(()=>[a(o,{modelValue:e.department.departCode,"onUpdate:modelValue":l[3]||(l[3]=t=>e.department.departCode=t),autocomplete:"off",disabled:""},null,8,["modelValue"])]),_:1},8,["label-width"]),a(i,{label:"部门描述","label-width":e.formLabelWidth},{default:d(()=>[a(o,{modelValue:e.department.departDesc,"onUpdate:modelValue":l[4]||(l[4]=t=>e.department.departDesc=t),autocomplete:"off",disabled:""},null,8,["modelValue"])]),_:1},8,["label-width"]),a(i,{label:"部门类别","label-width":e.formLabelWidth},{default:d(()=>[a(o,{modelValue:e.department.departType,"onUpdate:modelValue":l[5]||(l[5]=t=>e.department.departType=t),autocomplete:"off",disabled:""},null,8,["modelValue"])]),_:1},8,["label-width"]),a(i,{label:"学校id","label-width":e.formLabelWidth},{default:d(()=>[a(o,{modelValue:e.department.schoolId,"onUpdate:modelValue":l[6]||(l[6]=t=>e.department.schoolId=t),autocomplete:"off",disabled:""},null,8,["modelValue"])]),_:1},8,["label-width"]),a(i,{label:"创建时间","label-width":e.formLabelWidth},{default:d(()=>[a(o,{modelValue:e.department.createTime,"onUpdate:modelValue":l[7]||(l[7]=t=>e.department.createTime=t),autocomplete:"off",disabled:""},null,8,["modelValue"])]),_:1},8,["label-width"]),a(i,{label:"更新时间","label-width":e.formLabelWidth},{default:d(()=>[a(o,{modelValue:e.department.updateTime,"onUpdate:modelValue":l[8]||(l[8]=t=>e.department.updateTime=t),autocomplete:"off",disabled:""},null,8,["modelValue"])]),_:1},8,["label-width"]),a(i,{label:"是否弃用","label-width":e.formLabelWidth},{default:d(()=>[a(o,{modelValue:e.department.deleted,"onUpdate:modelValue":l[9]||(l[9]=t=>e.department.deleted=t),autocomplete:"off",disabled:""},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(h,{modelValue:e.EditDialogVisible,"onUpdate:modelValue":l[21]||(l[21]=t=>e.EditDialogVisible=t),title:"修改部门信息",width:"50%",center:""},{footer:d(()=>[u("span",j,[a(p,{onClick:l[20]||(l[20]=t=>e.EditDialogVisible=!1)},{default:d(()=>[s("取消")]),_:1}),a(p,{type:"primary",onClick:e.confirmEdit},{default:d(()=>[s(" 确认 ")]),_:1},8,["onClick"])])]),default:d(()=>[a(b,{model:e.department},{default:d(()=>[a(i,{label:"部门名","label-width":e.formLabelWidth},{default:d(()=>[a(o,{modelValue:e.department.departName,"onUpdate:modelValue":l[12]||(l[12]=t=>e.department.departName=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(i,{label:"部门英文名","label-width":e.formLabelWidth},{default:d(()=>[a(o,{modelValue:e.department.departCode,"onUpdate:modelValue":l[13]||(l[13]=t=>e.department.departCode=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(i,{label:"部门描述","label-width":e.formLabelWidth},{default:d(()=>[a(o,{modelValue:e.department.departDesc,"onUpdate:modelValue":l[14]||(l[14]=t=>e.department.departDesc=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(i,{label:"部门类别","label-width":e.formLabelWidth},{default:d(()=>[a(o,{modelValue:e.department.departType,"onUpdate:modelValue":l[15]||(l[15]=t=>e.department.departType=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(i,{label:"学校id","label-width":e.formLabelWidth},{default:d(()=>[a(o,{modelValue:e.department.schoolId,"onUpdate:modelValue":l[16]||(l[16]=t=>e.department.schoolId=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(i,{label:"创建时间","label-width":e.formLabelWidth},{default:d(()=>[a(o,{modelValue:e.department.createTime,"onUpdate:modelValue":l[17]||(l[17]=t=>e.department.createTime=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(i,{label:"更新时间","label-width":e.formLabelWidth},{default:d(()=>[a(o,{modelValue:e.department.updateTime,"onUpdate:modelValue":l[18]||(l[18]=t=>e.department.updateTime=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(i,{label:"是否弃用","label-width":e.formLabelWidth},{default:d(()=>[a(o,{modelValue:e.department.deleted,"onUpdate:modelValue":l[19]||(l[19]=t=>e.department.deleted=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const Y=D(A,[["render",q]]);export{Y as default};
