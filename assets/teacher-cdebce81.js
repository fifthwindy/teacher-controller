import{_ as T,d as C,B as E,E as n,C as U,D as N,c as k,G as W,b as D,H as b,h as L,i as h,j as a,w as o,F as y,k as I,l as B,m as S,n as v,o as g,p as z,q as m,r as $,s as P,t as F,u as K,v as A}from"./index-f6951b29.js";/* empty css                        */const O=C({data(){return{teachers:[],pageinfo:{currentPage:1,pageSize:5,totalpage:10},teacher:{createTime:"",depart:"",id:0,professional:"",school:"",teacherName:"",teacherNo:"",updateTime:"",userId:0},DialogVisible:!1,EditDialogVisible:!1,admin:!1,searchKey:""}},mounted(){this.getall(),JSON.parse(localStorage.getItem("admin"))?this.admin=JSON.parse(localStorage.getItem("admin")):this.admin=!1},methods:{search(){E(this.searchKey).then(e=>{e.success&&(n("查找成功"),this.teacher=e.data.teacher,this.DialogVisible=!0)}).catch(e=>{n(e.msg)})},tested(){console.log("2#A211".slice(3,6)),console.log(parseInt("2")+1)},getid(e){return e.split("")[2]=="A"?1e3+parseInt(e.slice(3,6)):2e3+parseInt(e.slice(3,6))},dsort(e){for(var l=0;l<e.length;l++)e[l].id=l+1;return e},pageChange(e){this.pageinfo.currentPage=e,this.getall()},getall(){let e=this.pageinfo.pageSize*(this.pageinfo.currentPage-1),l=this.pageinfo.currentPage*this.pageinfo.pageSize;U().then(i=>{if(i.success)this.teachers=i.data.teachers.slice(e,l),this.pageinfo.totalpage=i.data.teachers.length;else return!1}).catch(i=>{console.log(i)})},add(){this.DialogVisible=!0},confirmAdd(){const e=this.teacher;N(e).then(l=>{this.getall()}).catch(l=>{console.log(l)}),this.DialogVisible=!1},edit(e){this.EditDialogVisible=!0,this.teacher=k(e)},confirmEdit(){let e=this.teacher;W(e).then(l=>{if(l.success)this.EditDialogVisible=!1,this.getall(),n(l.msg);else return n(l.msg),!1}).catch(l=>{n("网络错误联系管理员")})},del(e){console.log(e);const l={id:e};D.confirm("是否确认删除","Warning",{confirmButtonText:"确认删除",cancelButtonText:"在考虑一下",type:"warning"}).then(()=>{n({type:"success",message:"删除成功"}),b(l).then(i=>{if(i.success)this.getall();else return console.log(i.msg),!1}).catch(i=>{console.log(i)})}).catch(()=>{n({type:"info",message:"在考虑一下"})})},delall(){for(let e=1;e<=this.pageinfo.totalpage;e++)b({id:e}).then(i=>{if(i.success)this.getall();else return console.log(i.msg),!1}).catch(i=>{console.log(i)})}}}),J={class:"head"},M={class:"dialog-footer"},j={class:"dialog-footer"};function q(e,l,i,G,H,Q){const u=P,d=I,s=F,V=B,c=S,r=K,p=A,f=v;return g(),L(y,null,[h("div",J,[a(d,{placeholder:"输入教师编号以便搜索",modelValue:e.searchKey,"onUpdate:modelValue":l[0]||(l[0]=t=>e.searchKey=t)},{append:o(()=>[a(u,{icon:"Search",onClick:e.search},null,8,["onClick"])]),_:1},8,["modelValue"]),a(V,{data:e.teachers,style:{width:"100%"}},{default:o(()=>[a(s,{fixed:"",prop:"id",label:"教师id",width:"150"}),a(s,{prop:"userId",label:"教师编号",width:"120"}),a(s,{prop:"teacherName",label:"教师姓名",width:"120"}),a(s,{prop:"school",label:"所在学校",width:"120"}),a(s,{prop:"depart",label:"所在学院",width:"120"}),a(s,{prop:"teacherNo",label:"教师工号",width:"120"}),a(s,{prop:"professional",label:"教师职称",width:"120"}),a(s,{prop:"createTime",label:"创建时间",width:"120"}),a(s,{prop:"updateTime",label:"更新时间",width:"120"}),e.admin?(g(),z(s,{key:0,fixed:"right",label:"Operations",width:"120"},{default:o(t=>[a(u,{link:"",type:"primary",size:"small",onClick:w=>e.edit(t.row)},{default:o(()=>[m("修改")]),_:2},1032,["onClick"]),a(u,{link:"",type:"primary",size:"small",onClick:w=>e.del(t.row.id)},{default:o(()=>[m("删除")]),_:2},1032,["onClick"])]),_:1})):$("",!0)]),_:1},8,["data"]),a(c,{layout:"prev, pager, next",total:e.pageinfo.totalpage,"page-size":e.pageinfo.pageSize,onCurrentChange:e.pageChange},null,8,["total","page-size","onCurrentChange"])]),a(f,{modelValue:e.DialogVisible,"onUpdate:modelValue":l[10]||(l[10]=t=>e.DialogVisible=t),title:"查询教师结果",width:"50%",center:""},{footer:o(()=>[h("span",M,[a(u,{onClick:l[9]||(l[9]=t=>e.DialogVisible=!1)},{default:o(()=>[m("关闭")]),_:1})])]),default:o(()=>[a(p,{model:e.teacher},{default:o(()=>[a(r,{label:"教师编号","label-width":e.formLabelWidth},{default:o(()=>[a(d,{modelValue:e.teacher.userId,"onUpdate:modelValue":l[1]||(l[1]=t=>e.teacher.userId=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(r,{label:"教师姓名","label-width":e.formLabelWidth},{default:o(()=>[a(d,{modelValue:e.teacher.teacherName,"onUpdate:modelValue":l[2]||(l[2]=t=>e.teacher.teacherName=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(r,{label:"所在学校","label-width":e.formLabelWidth},{default:o(()=>[a(d,{modelValue:e.teacher.school,"onUpdate:modelValue":l[3]||(l[3]=t=>e.teacher.school=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(r,{label:"所在学院","label-width":e.formLabelWidth},{default:o(()=>[a(d,{modelValue:e.teacher.depart,"onUpdate:modelValue":l[4]||(l[4]=t=>e.teacher.depart=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(r,{label:"教师工号","label-width":e.formLabelWidth},{default:o(()=>[a(d,{modelValue:e.teacher.teacherNo,"onUpdate:modelValue":l[5]||(l[5]=t=>e.teacher.teacherNo=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(r,{label:"教师职称","label-width":e.formLabelWidth},{default:o(()=>[a(d,{modelValue:e.teacher.professional,"onUpdate:modelValue":l[6]||(l[6]=t=>e.teacher.professional=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(r,{label:"创建时间","label-width":e.formLabelWidth},{default:o(()=>[a(d,{modelValue:e.teacher.createTime,"onUpdate:modelValue":l[7]||(l[7]=t=>e.teacher.createTime=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(r,{label:"更新时间","label-width":e.formLabelWidth},{default:o(()=>[a(d,{modelValue:e.teacher.updateTime,"onUpdate:modelValue":l[8]||(l[8]=t=>e.teacher.updateTime=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(f,{modelValue:e.EditDialogVisible,"onUpdate:modelValue":l[20]||(l[20]=t=>e.EditDialogVisible=t),title:"修改教师信息",width:"50%",center:""},{footer:o(()=>[h("span",j,[a(u,{onClick:l[19]||(l[19]=t=>e.EditDialogVisible=!1)},{default:o(()=>[m("取消")]),_:1}),a(u,{type:"primary",onClick:e.confirmEdit},{default:o(()=>[m(" 确认 ")]),_:1},8,["onClick"])])]),default:o(()=>[a(p,{model:e.teacher},{default:o(()=>[a(r,{label:"教师编号","label-width":e.formLabelWidth},{default:o(()=>[a(d,{modelValue:e.teacher.userId,"onUpdate:modelValue":l[11]||(l[11]=t=>e.teacher.userId=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(r,{label:"教师姓名","label-width":e.formLabelWidth},{default:o(()=>[a(d,{modelValue:e.teacher.teacherName,"onUpdate:modelValue":l[12]||(l[12]=t=>e.teacher.teacherName=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(r,{label:"所在学校","label-width":e.formLabelWidth},{default:o(()=>[a(d,{modelValue:e.teacher.school,"onUpdate:modelValue":l[13]||(l[13]=t=>e.teacher.school=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(r,{label:"所在学院","label-width":e.formLabelWidth},{default:o(()=>[a(d,{modelValue:e.teacher.depart,"onUpdate:modelValue":l[14]||(l[14]=t=>e.teacher.depart=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(r,{label:"教师工号","label-width":e.formLabelWidth},{default:o(()=>[a(d,{modelValue:e.teacher.teacherNo,"onUpdate:modelValue":l[15]||(l[15]=t=>e.teacher.teacherNo=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(r,{label:"教师职称","label-width":e.formLabelWidth},{default:o(()=>[a(d,{modelValue:e.teacher.professional,"onUpdate:modelValue":l[16]||(l[16]=t=>e.teacher.professional=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(r,{label:"创建时间","label-width":e.formLabelWidth},{default:o(()=>[a(d,{modelValue:e.teacher.createTime,"onUpdate:modelValue":l[17]||(l[17]=t=>e.teacher.createTime=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(r,{label:"更新时间","label-width":e.formLabelWidth},{default:o(()=>[a(d,{modelValue:e.teacher.updateTime,"onUpdate:modelValue":l[18]||(l[18]=t=>e.teacher.updateTime=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const Y=T(O,[["render",q]]);export{Y as default};
